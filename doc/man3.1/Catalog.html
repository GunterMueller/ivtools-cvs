<HTML>
<BODY>
<PRE>
<!-- Manpage converted by man2html 3.0.1 -->
       Catalog - stores and retrieves named objects


</PRE>
<H2>SYNOPSIS</H2><PRE>
       <B>#include</B> <B>&lt;Unidraw/catalog.h&gt;</B>


</PRE>
<H2>DESCRIPTION</H2><PRE>
       A catalog provides independent name-to-object mappings for
       component  subjects,  commands,  tools,  and  editor  info
       objects.   Once  named,  an object can be retrieved later,
       even if the application has  been  exited  and  restarted.
       The  catalog  thus  provides a means for saving objects in
       non-volatile form for subsequent retrieval.


</PRE>
<H2>PUBLIC OPERATIONS</H2><PRE>
       <B>Catalog(const</B> <B>char*</B> <B>domainName,</B> <B>Creator*,</B> <B>float</B> <B>version)</B>
              Construct  a  catalog,  supplying  an  application-
              unique domain name, a creator object, and a version
              number.  Unidraw objects may use  the  domain  name
              for  file type checking purposes, and they may rely
              on the version number to  handle  evolving  storage
              formats.

       <B>virtual</B> <B>boolean</B> <B>Save(EditorInfo*,</B> <B>const</B> <B>char*)</B>
       <B>virtual</B> <B>boolean</B> <B>Save(Component*,</B> <B>const</B> <B>char*)</B>
       <B>virtual</B> <B>boolean</B> <B>Save(Command*,</B> <B>const</B> <B>char*)</B>
       <B>virtual</B> <B>boolean</B> <B>Save(Tool*,</B> <B>const</B> <B>char*)</B>
              Save  an  object instance under the specified name.
              The catalog stores a textual representation for the
              object  in  a file with the given name; therefore a
              name with embedded slashes corresponds to the  path
              name  for the file containing the textual represen-
              tation.  These operations return <I>false</I> if the  file
              could not be written.

       <B>virtual</B> <B>boolean</B> <B>Retrieve(const</B> <B>char*,</B> <B>EditorInfo*&amp;)</B>
       <B>virtual</B> <B>boolean</B> <B>Retrieve(const</B> <B>char*,</B> <B>Component*&amp;)</B>
       <B>virtual</B> <B>boolean</B> <B>Retrieve(const</B> <B>char*,</B> <B>Command*&amp;)</B>
       <B>virtual</B> <B>boolean</B> <B>Retrieve(const</B> <B>char*,</B> <B>Tool*&amp;)</B>
              Retrieve  an  object  instance having the specified
              name.  The catalog reconstructs an instance of  the
              object   from   the  corresponding  file  when  the
              instance is first retrieved.  Subsequent retrievals
              with  the  same  name  return  a  reference  to the
              instance  already  in  memory.   These   operations
              return  <I>false</I>  if  the instance could not be recon-
              structed from the file.

       <B>virtual</B> <B>void</B> <B>Forget(EditorInfo*,</B> <B>const</B> <B>char*</B> <B>=</B> <B>nil)</B>
       <B>virtual</B> <B>void</B> <B>Forget(Component*,</B> <B>const</B> <B>char*</B> <B>=</B> <B>nil)</B>
       <B>virtual</B> <B>void</B> <B>Forget(Command*,</B> <B>const</B> <B>char*</B> <B>=</B> <B>nil)</B>
       <B>virtual</B> <B>void</B> <B>Forget(Tool*,</B> <B>const</B> <B>char*</B> <B>=</B> <B>nil)</B>
              Forget the name-to-object  mapping  for  the  given
              which  is  useful  when  an instance has been saved
              under different names.

       <B>virtual</B> <B>const</B> <B>char*</B> <B>GetName(EditorInfo*)</B>
       <B>virtual</B> <B>const</B> <B>char*</B> <B>GetName(Component*)</B>
       <B>virtual</B> <B>const</B> <B>char*</B> <B>GetName(Command*)</B>
       <B>virtual</B> <B>const</B> <B>char*</B> <B>GetName(Tool*)</B>
              Get a name  associated  with  an  instance.   These
              operations  do  not  specify which name is returned
              for instances that have been saved under more  than
              one name.

       <B>virtual</B> <B>boolean</B> <B>Valid(const</B> <B>char*,</B> <B>EditorInfo*&amp;)</B>
       <B>virtual</B> <B>boolean</B> <B>Valid(const</B> <B>char*,</B> <B>Component*&amp;)</B>
       <B>virtual</B> <B>boolean</B> <B>Valid(const</B> <B>char*,</B> <B>Command*&amp;)</B>
       <B>virtual</B> <B>boolean</B> <B>Valid(const</B> <B>char*,</B> <B>Tool*&amp;)</B>
              Return  whether  the  given  name  has  an instance
              already associated with it (i.e., it has been saved
              or retrieved) and if so return that instance in the
              second parameter.

       <B>virtual</B> <B>Component*</B> <B>Copy(Component*)</B>
       <B>virtual</B> <B>Command*</B> <B>Copy(Command*)</B>
       <B>virtual</B> <B>Tool*</B> <B>Copy(Tool*)</B>
              Copy an instance by saving  it  under  a  temporary
              name,  then  retrieving  it, and finally forgetting
              the temporary name.  A component, command, or tools
              subclass  can  use  the  corresponding  function to
              implement their Copy function easily,  possibly  at
              the expense of run-time performance.

       <B>virtual</B> <B>boolean</B> <B>Exists(const</B> <B>char*)</B>
              Return  whether  a file with the given name exists.
              A return value of <I>true</I> does  not  necessarily  mean
              that  an  object has been saved under the specified
              name.

       <B>virtual</B> <B>boolean</B> <B>Writable(const</B> <B>char*)</B>
              Return whether it is permitted to  save  an  object
              under the given name.

       <B>void</B> <B>SetClipboard(Clipboard*)</B>
       <B>Clipboard*</B> <B>GetClipboard()</B>
              Set  or get a globally-accessible clipboard object.

       <B>void</B> <B>SetEditorInfo(EditorInfo*)</B>
       <B>EditorInfo*</B> <B>GetEditorInfo()</B>
              Set  or  get  a  globally-accessible  editor   info
              object.

       <B>const</B> <B>char*</B> <B>GetName()</B>
       <B>Creator*</B> <B>GetCreator()</B>
              Return  the values of constructor-specified parame-
              ters.

       <B>float</B> <B>FileVersion()</B>
              Return the Unidraw version number of the file being
              read currently.

       <B>const</B> <B>char*</B> <B>GetAttribute(const</B> <B>char*)</B>
              Return  the  value  of  a  user preference with the
              given name as stored in the  global  PropertySheet.
              This operation is equivalent to the World operation
              of the same name.

       <B>void</B> <B>WriteVersion(int,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteClassId(ClassId,</B> <B>ostream&amp;,</B> <B>int</B> <B>id</B> <B>=</B> <B>0)</B>
       <B>void</B> <B>WriteComponent(Component*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteCommand(Command*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteTool(Tool*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteStateVar(StateVar*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteTransferFunct(TransferFunct*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteBgFilled(boolean,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteBrush(PSBrush*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteColor(PSColor*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteFont(PSFont*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WritePattern(PSPattern*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteTransformer(Transformer*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteString(const</B> <B>char*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteControlInfo(ControlInfo*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteEditorInfo(EditorInfo*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteBitmap(Bitmap*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteBitmapData(Bitmap*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteGraymap(Raster*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteGraymapData(Raster*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteRaster(Raster*,</B> <B>ostream&amp;)</B>
       <B>void</B> <B>WriteRasterData(Raster*,</B> <B>ostream&amp;)</B>

       <B>int</B> <B>ReadVersion(istream&amp;)</B>
       <B>ClassId</B> <B>ReadClassId(istream&amp;,</B> <B>int&amp;</B> <B>id)</B>
       <B>Component*</B> <B>ReadComponent(istream&amp;)</B>
       <B>Command*</B> <B>ReadCommand(istream&amp;)</B>
       <B>Tool*</B> <B>ReadTool(istream&amp;)</B>
       <B>StateVar*</B> <B>ReadStateVar(istream&amp;)</B>
       <B>TransferFunct*</B> <B>ReadTransferFunct(istream&amp;)</B>
       <B>int</B> <B>ReadBgFilled(istream&amp;)</B>
       <B>PSBrush*</B> <B>ReadBrush(istream&amp;)</B>
       <B>PSColor*</B> <B>ReadColor(istream&amp;)</B>
       <B>PSFont*</B> <B>ReadFont(istream&amp;)</B>
       <B>PSPattern*</B> <B>ReadPattern(istream&amp;)</B>
       <B>Transformer*</B> <B>ReadTransformer(istream&amp;)</B>
       <B>char*</B> <B>ReadString(istream&amp;)</B>
       <B>ControlInfo*</B> <B>ReadControlInfo(istream&amp;)</B>
       <B>EditorInfo*</B> <B>ReadEditorInfo(istream&amp;)</B>
       <B>Bitmap*</B> <B>ReadBitmapData(istream&amp;)</B>
       <B>Raster*</B> <B>ReadGraymap(istream&amp;)</B>
       <B>Raster*</B> <B>ReadGraymapData(istream&amp;)</B>
       <B>Raster*</B> <B>ReadRaster(istream&amp;)</B>
       <B>Raster*</B> <B>ReadRasterData(istream&amp;)</B>
              Write and read information via  streams.   Catalog-
              managed classes use these operations in their Write
              and Read functions to write and  read  the  objects
              they contain.  The operations for writing and read-
              ing bitmaps and rasters  have  accompanying  opera-
              tions  that  write  and  read  only  the ASCII data
              (i.e., omitting transformation  and  other  Unidraw
              format-specific  data)  that encodes their informa-
              tion content.

       <B>PSBrush*</B> <B>ReadBrush(const</B> <B>char*</B> <B>definition,</B> <B>int</B> <B>index)</B>
       <B>PSColor*</B> <B>ReadColor(const</B> <B>char*</B> <B>definition,</B> <B>int</B> <B>index)</B>
       <B>PSFont*</B> <B>ReadFont(const</B> <B>char*</B> <B>definition,</B> <B>int</B> <B>index)</B>
       <B>PSPattern*</B> <B>ReadPattern(const</B> <B>char*,</B> <B>int</B> <B>index)</B>
              Return a PostScript paint object  corresponding  to
              the value of a user preference with the given defi-
              nition and index number as  stored  in  the  global
              PropertySheet.   Each  string  in  the  X  defaults
              database    of     the     form     ``&lt;application-
              Name&gt;.resource:definition''  sets  a resource.  The
              resource names and their definitions are  specified
              as follows:

              <B>brush</B><I>i:</I>  Define  the <I>i</I>th brush resource.  The Read-
              Brush operation retrieves the brush object for this
              resource  given  a definition.  The definition usu-
              ally specifies two numbers:  a  16-bit  hexadecimal
              number to define the brush's line style (each 1 bit
              draws a dash and each 0 bit produces a gap), and  a
              decimal integer to define the brush's width in pix-
              els.  For example,  ``ffff  1''  defines  a  single
              pixel  wide solid line. If the definition specifies
              only the  string  ``none'',  then  it  defines  the
              nonexistent brush.

              <B>fgcolor</B><I>i:</I> Define the <I>i</I>th foreground color resource.
              The ReadColor operation retrieves the color  object
              for  this resource given a definition.  The defini-
              tion contains a string defining  the  name  of  the
              color, optionally followed by three decimal numbers
              between 0 and 65535 to define the red,  green,  and
              blue  components  of  the  color's  intensity.  The
              intensities override the name; that is, the catalog
              will  look  the  name  up in the database of common
              colors only if you omit the intensities.  For exam-
              ple, ``Indigo 48896 0 65280'' defines a color which
              is a mixture of red and blue. You can define shades

              <B>bgcolor</B><I>i:</I> The background color resource  definition
              is  specified  in the same manner as the foreground
              color.

              <B>font</B><I>i:</I> Define the <I>i</I>th font resource.  The  ReadFont
              operation   retrieves  the  font  object  for  this
              resource given a definition.  The  definition  con-
              tains  three  strings separated by whitespace.  The
              first string defines the font's  name,  the  second
              string  the corresponding print font, and the third
              string the print  size.   For  example,  ``8x13bold
              Courier-Bold 13'' defines the third font entry.

              <B>pattern</B><I>i:</I>  Define  the  <I>i</I>th  pattern  resource. The
              ReadPattern operation retrieves the pattern  object
              for  this resource given a definition.  The defini-
              tion can specify the pattern for a 16x16 bitmap,  a
              8x8  bitmap,  a  4x4 bitmap, a grayscale number, or
              the string ``none''.  You specify the 16x16  bitmap
              with  sixteen  16-bit  hexadecimal numbers, the 8x8
              bitmap with eight 8-bit  hexadecimal  numbers,  the
              4x4 bitmap with a single 16-bit hexadecimal number,
              and the grayscale number  with  a  single  floating
              point  number.  The floating point number must con-
              tain a period to distinguish itself from the single
              hexadecimal number, and it must lie between 0.0 and
              1.0, where 0.0 corresponds to a solid  pattern  and
              1.0 to a clear pattern.  On the printer, the bitmap
              patterns appear as bitmaps, the grayscale  patterns
              appear  as  halftoned shades, and the ``none'' pat-
              terns never obscure underlying graphics.  For exam-
              ple, ``pattern8:8421'' defines a diagonally hatched
              pattern.


       <B>PSBrush*</B> <B>FindNoneBrush()</B>
       <B>PSBrush*</B> <B>FindBrush(int,</B> <B>int)</B>
       <B>PSColor*</B> <B>FindColor(const</B> <B>char*,</B> <B>int</B> <B>=</B> <B>0,</B> <B>int</B> <B>=</B> <B>0,</B> <B>int</B> <B>=</B> <B>0)</B>
       <B>PSFont*</B> <B>FindFont(const</B> <B>char*,</B> <B>const</B> <B>char*,</B> <B>const</B> <B>char*)</B>
       <B>PSPattern*</B> <B>FindNonePattern()</B>
       <B>PSPattern*</B> <B>FindGrayLevel(float)</B>
       <B>PSPattern*</B> <B>FindPattern(int[],</B> <B>int)</B>
              Return  a  PostScript  paint object with the corre-
              sponding attributes.  These operations return a new
              paint object if no object with the given attributes
              already exists; otherwise the operations return  an
              existing instance with matching attributes.

       <B>void</B> <B>Skip(istream&amp;)</B>
       <B>void</B> <B>Mark(ostream&amp;)</B>
              Mark  injects a synchronization sequence defined by
              input stream and position  the  stream  immediately
              after that sequence.


</PRE>
<H2>PROTECTED OPERATIONS</H2><PRE>
       <B>void</B> <B>Register(EditorInfo*,</B> <B>const</B> <B>char*)</B>
       <B>void</B> <B>Register(Component*,</B> <B>const</B> <B>char*)</B>
       <B>void</B> <B>Register(Command*,</B> <B>const</B> <B>char*)</B>
       <B>void</B> <B>Register(Tool*,</B> <B>const</B> <B>char*)</B>
              Register  an  object under a particular name in the
              catalog's internal maps.  Objects are normally reg-
              istered  automatically  when  they  are  stored  or
              retrieved.

       <B>int</B> <B>GetToken(istream&amp;,</B> <B>char*</B> <B>buf,</B> <B>int</B> <B>buf_size)</B>
              Search an input stream for a sequence of characters
              defined in the buffer <I>buf</I> of size <I>buf</I><B>_</B><I>size</I>.  GetTo-
              ken returns the number of characters matched.


</PRE>
<H2>SEE ALSO</H2><PRE>
       <B>Clipboard(3U)</B>,    <B>Command(3U)</B>,     <B>Component(3U)</B>,     Con-
       <B>trolInfo(3U)</B>,  <B>Creator(3U)</B>,  <B>EditorInfo(3U)</B>,  <B>Graphic(3U)</B>,
       <B>PropertySheet(3I)</B>,   <B>StateVar(3U)</B>,   <B>Tool(3U)</B>,   Transfer-
       <B>Funct(3U)</B>,    <B>World(3I)</B>,    <B>globals(3U)</B>,    istream(3C++),
       ostream(3C++)




























</PRE>
<HR>
<ADDRESS>
Man(1) output converted with
<a href="http://www.oac.uci.edu/indiv/ehood/man2html.html">man2html</a>
</ADDRESS>
</BODY>
</HTML>
